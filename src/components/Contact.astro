---
interface Props {
  t: (key: string) => string;
}

const { t } = Astro.props;
---

<section 
  id="contact" 
  class="relative min-h-screen overflow-hidden flex items-center justify-center"
  data-contact-section
>
  
  <!-- Additional overlay for better text contrast -->
  <div class="absolute inset-0 bg-black/40 z-5"></div>

  <!-- Enhanced hexagonal particles -->
  <div class="absolute inset-0 z-10 overflow-hidden pointer-events-none">
    <div class="hex-particle absolute top-1/4 left-1/4 w-4 h-4 text-accent/20">
      <svg viewBox="0 0 100 100" class="w-full h-full fill-current">
        <polygon points="50,2 86,25 86,75 50,98 14,75 14,25" />
      </svg>
    </div>
    <div class="hex-particle absolute top-3/4 right-1/3 w-6 h-6 text-accent/15">
      <svg viewBox="0 0 100 100" class="w-full h-full fill-current">
        <polygon points="50,2 86,25 86,75 50,98 14,75 14,25" />
      </svg>
    </div>
    <div class="hex-particle absolute bottom-1/4 left-1/3 w-5 h-5 text-accent/10">
      <svg viewBox="0 0 100 100" class="w-full h-full fill-current">
        <polygon points="50,2 86,25 86,75 50,98 14,75 14,25" />
      </svg>
    </div>
    <div class="hex-particle absolute top-1/2 right-1/4 w-3 h-3 text-accent/25">
      <svg viewBox="0 0 100 100" class="w-full h-full fill-current">
        <polygon points="50,2 86,25 86,75 50,98 14,75 14,25" />
      </svg>
    </div>
    <div class="hex-particle absolute top-1/6 right-1/2 w-8 h-8 text-accent/30">
      <svg viewBox="0 0 100 100" class="w-full h-full fill-current">
        <polygon points="50,2 86,25 86,75 50,98 14,75 14,25" />
      </svg>
    </div>
  </div>

  <!-- Main Content Container -->
  <div class="relative z-20 w-full max-w-6xl mx-auto px-6 py-20">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
      
      <!-- Left Side - Info -->
      <div class="space-y-8" data-contact-info>
        <div>
          <h2 
            class="text-4xl md:text-5xl lg:text-6xl font-bold text-accent mb-6"
            data-contact-title
          >
            {t("contact.title")}
          </h2>
          <p 
            class="text-lg md:text-xl text-gray-300 leading-relaxed"
            data-contact-subtitle
          >
            {t("contact.subtitle")}
          </p>
        </div>

        <!-- Contact Information -->
        <div class="space-y-4" data-contact-details>
          <div class="flex items-center gap-4 text-gray-300 hover:text-white transition-colors duration-300">
            <div class="w-6 h-6 text-accent">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/>
              </svg>
            </div>
            <span>{t("contact.info.address")}</span>
          </div>
          
          <div class="flex items-center gap-4 text-gray-300 hover:text-white transition-colors duration-300">
            <div class="w-6 h-6 text-accent">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
              </svg>
            </div>
            <span>{t("contact.info.phone")}</span>
          </div>
          
          <div class="flex items-center gap-4 text-gray-300 hover:text-white transition-colors duration-300">
            <div class="w-6 h-6 text-accent">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
              </svg>
            </div>
            <span>{t("contact.info.email")}</span>
          </div>
          
          <div class="flex items-center gap-4 text-gray-300 hover:text-white transition-colors duration-300">
            <div class="w-6 h-6 text-accent">
              <svg fill="currentColor" viewBox="0 0 24 24">
                <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"/>
                <path d="M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
              </svg>
            </div>
            <span>{t("contact.info.hours")}</span>
          </div>
        </div>
      </div>

      <!-- Right Side - Contact Form -->
      <div class="relative">
        <!-- Enhanced hexagonal glow background -->
        <div class="absolute inset-0 scale-110 opacity-30" data-form-glow>
          <svg viewBox="0 0 400 400" class="w-full h-full">
            <defs>
              <linearGradient id="hexGlow" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#8BC53F;stop-opacity:0.4" />
                <stop offset="50%" style="stop-color:#4CAF50;stop-opacity:0.2" />
                <stop offset="100%" style="stop-color:#2E7D32;stop-opacity:0.3" />
              </linearGradient>
              <filter id="blur" x="-50%" y="-50%" width="200%" height="200%">
                <feGaussianBlur stdDeviation="12" result="coloredBlur"/>
                <feMerge>
                  <feMergeNode in="coloredBlur"/>
                  <feMergeNode in="SourceGraphic"/>
                </feMerge>
              </filter>
            </defs>
            <polygon 
              points="200,50 350,125 350,275 200,350 50,275 50,125" 
              fill="url(#hexGlow)" 
              filter="url(#blur)"
            />
          </svg>
        </div>

        <!-- Contact Form -->
        <div 
          class="
            relative bg-white/10 backdrop-blur-md 
            border border-white/20 rounded-2xl p-8 
            shadow-2xl hover:shadow-3xl hover:bg-white/15
            transition-all duration-300
          "
          data-contact-form
        >
          <form class="space-y-6" data-form>
            <!-- Name Field -->
            <div class="form-group" data-form-group>
              <label 
                for="name" 
                class="block text-sm font-medium text-white mb-2"
              >
                {t("contact.form.name")}
                <span class="text-red-400">*</span>
              </label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required
                placeholder={t("contact.form.namePlaceholder")}
                class="
                  w-full px-4 py-3 rounded-lg
                  bg-white/10 border border-white/20
                  text-white placeholder-gray-400
                  focus:border-accent focus:ring-2 focus:ring-accent/20
                  transition-all duration-300
                  focus:bg-white/20 hover:bg-white/15
                "
                data-form-input
                aria-describedby="name-error"
              />
              <span id="name-error" class="error-message text-red-400 text-sm mt-1 hidden" role="alert">
                {t("contact.form.required")}
              </span>
            </div>

            <!-- Email Field -->
            <div class="form-group" data-form-group>
              <label 
                for="email" 
                class="block text-sm font-medium text-white mb-2"
              >
                {t("contact.form.email")}
                <span class="text-red-400">*</span>
              </label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required
                placeholder={t("contact.form.emailPlaceholder")}
                class="
                  w-full px-4 py-3 rounded-lg
                  bg-white/10 border border-white/20
                  text-white placeholder-gray-400
                  focus:border-accent focus:ring-2 focus:ring-accent/20
                  transition-all duration-300
                  focus:bg-white/20 hover:bg-white/15
                "
                data-form-input
                aria-describedby="email-error"
              />
              <span id="email-error" class="error-message text-red-400 text-sm mt-1 hidden" role="alert">
                {t("contact.form.required")}
              </span>
            </div>

            <!-- Subject Field -->
            <div class="form-group" data-form-group>
              <label 
                for="subject" 
                class="block text-sm font-medium text-white mb-2"
              >
                {t("contact.form.company")}
                <span class="text-red-400">*</span>
              </label>
              <input 
                type="text" 
                id="subject" 
                name="subject" 
                required
                placeholder={t("contact.form.companyPlaceholder")}
                class="
                  w-full px-4 py-3 rounded-lg
                  bg-white/10 border border-white/20
                  text-white placeholder-gray-400
                  focus:border-accent focus:ring-2 focus:ring-accent/20
                  transition-all duration-300
                  focus:bg-white/20 hover:bg-white/15
                "
                data-form-input
                aria-describedby="subject-error"
              />
              <span id="subject-error" class="error-message text-red-400 text-sm mt-1 hidden" role="alert">
                {t("contact.form.required")}
              </span>
            </div>

            <!-- Message Field -->
            <div class="form-group" data-form-group>
              <label 
                for="message" 
                class="block text-sm font-medium text-white mb-2"
              >
                {t("contact.form.message")}
                <span class="text-red-400">*</span>
              </label>
              <textarea 
                id="message" 
                name="message" 
                rows="5" 
                required
                placeholder={t("contact.form.messagePlaceholder")}
                class="
                  w-full px-4 py-3 rounded-lg
                  bg-white/10 border border-white/20
                  text-white placeholder-gray-400
                  focus:border-accent focus:ring-2 focus:ring-accent/20
                  transition-all duration-300
                  focus:bg-white/20 hover:bg-white/15
                  resize-vertical
                "
                data-form-input
                aria-describedby="message-error"
              ></textarea>
              <span id="message-error" class="error-message text-red-400 text-sm mt-1 hidden" role="alert">
                {t("contact.form.required")}
              </span>
            </div>

            <!-- Submit Button -->
            <div class="pt-4">
              <button 
                type="submit" 
                class="
                  w-full px-8 py-4 
                  bg-gradient-to-r from-primary to-secondary
                  text-white font-semibold rounded-lg
                  hover:from-primary/90 hover:to-secondary/90
                  focus:ring-4 focus:ring-accent/20
                  transition-all duration-300
                  transform hover:scale-105 hover:shadow-xl
                  shadow-lg shadow-primary/25
                  disabled:opacity-50 disabled:cursor-not-allowed
                  disabled:hover:scale-100
                "
                data-form-submit
                aria-describedby="submit-status"
              >
                <span class="flex items-center justify-center gap-2">
                  {t("contact.form.send")}
                  <svg class="w-5 h-5 transform transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"/>
                  </svg>
                </span>
              </button>
              <div id="submit-status" class="mt-2 text-sm text-center hidden" role="status" aria-live="polite">
                <!-- Status messages will be shown here -->
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  /* Video optimization */
  video {
    filter: brightness(0.6) contrast(1.2) saturate(1.1);
  }

  /* Enhanced form styling */
  .form-group {
    position: relative;
  }

  /* Input focus glow effect */
  input:focus,
  textarea:focus {
    box-shadow: 0 0 0 2px rgba(139, 197, 63, 0.2), 0 0 20px rgba(139, 197, 63, 0.1);
  }

  /* Hexagonal particle subtle animation */
  .hex-particle {
    opacity: 0.3;
    transition: opacity 0.3s ease;
  }

  .hex-particle:hover {
    opacity: 0.6;
  }

  /* Hardware acceleration */
  .hex-particle,
  [data-contact-form],
  [data-form-glow] {
    will-change: transform;
    transform: translateZ(0);
  }

  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .grid {
      grid-template-columns: 1fr;
      gap: 2rem;
    }
    
    [data-contact-info] {
      order: 2;
    }
    
    [data-contact-form] {
      order: 1;
    }
  }

  @media (max-width: 768px) {
    [data-contact-form] {
      padding: 1.5rem;
    }
    
    .form-group {
      margin-bottom: 1rem;
    }
  }

  /* Accessibility - Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * {
      transition: none !important;
      animation: none !important;
    }
    
    button:hover {
      transform: none !important;
    }
  }

  /* Success/Error states */
  .form-success {
    border-color: #10b981;
    background-color: rgba(16, 185, 129, 0.1);
  }

  .form-error {
    border-color: #ef4444;
    background-color: rgba(239, 68, 68, 0.1);
  }

  /* Loading state */
  .loading {
    position: relative;
    pointer-events: none;
  }

  .loading::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 20px;
    height: 20px;
    margin: -10px 0 0 -10px;
    border: 2px solid transparent;
    border-top: 2px solid #ffffff;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    // Simple video optimization
    const video = document.querySelector('#contact video') as HTMLVideoElement;
    if (video) {
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            video.play().catch(() => {
              video.style.display = 'none';
            });
          } else {
            video.pause();
          }
        });
      }, { threshold: 0.1 });
      
      observer.observe(video);
    }
  });
</script> 